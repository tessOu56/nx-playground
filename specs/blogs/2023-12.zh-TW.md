---
id: 2023-12
slug: 2023-12
title: 前端架構深化與企業級系統協作 - 2023
year: 2023
publishDate: 2023-12-31
excerpt: Next.js App Router、GraphQL schema 驅動開發與企業級 B2B SaaS 平台
techStack:
  - Next.js (App Router)
  - React
  - TypeScript
  - GraphQL
  - Apollo Client
  - Node.js
  - NestJS
  - PostgreSQL
  - Server Components
tags:
  - nextjs
  - graphql
  - apollo
  - enterprise
  - performance
  - architecture
coverImage: https://picsum.photos/seed/2023-nx/800/400
---

# 前端架構深化與企業級系統協作 - 2023

## 🧭 加入軟體開發公司

2023 年，我加入一家**軟體開發公司**，正式專注於前端領域的開發。

公司主要承接**中大型企業專案**，我所屬團隊為**亞洲大型廣告企業**開發**廣告業務管理系統（Advertising Business Management System）**。

### 團隊組成

團隊成員包含：
- 前端工程師
- 後端工程師
- 系統分析（SA）
- 設計師
- 產品經理（PM）
- QA 測試

協作頻繁、開發節奏明確。

### 技術棧

**後端**：Node.js、NestJS、PostgreSQL、GraphQL

**前端**：Next.js **（App Router）** 搭配新一代模式：
- Server Components
- Dynamic/Parallel Routes
- Streaming rendering

---

## 專案背景與技術挑戰

這是一個**大型 B2B SaaS 平台**，整合：
- 客戶資料
- 媒體資產
- 活動管理
- 預算追蹤
- 報表分析

### 我的職責

我負責**前端介面模組設計與開發**，並參與**表單流程引擎（Form Flow Engine）** 的前端邏輯規劃。

系統包含大量：
- 動態表單
- 巢狀欄位
- 跨頁資料傳遞

需兼顧**效能與一致性**。

我與**後端、SA、設計**密切對齊資料流與使用情境，並針對以下進行多輪優化：
- 瀏覽器效能
- 狀態同步
- 載入策略

在架構層建立**模組化 UI 結構**與**共用邏輯元件（Shared Logic Components）**，確保跨模組一致擴充與維護。

---

## GraphQL 與 Schema 對照式開發

後端以 **GraphQL Schema** 為核心設計 API，前端依同一份 Schema 進行開發與型別綁定，形成 **Schema 驅動開發（Schema-Driven Development）**：

### 關鍵實踐

**Query/Mutation 整合**：
- 使用 Query/Mutation 串接複雜業務資料
- 配合 **Apollo Client** 管理快取與狀態
- 結合 TypeScript 型別推導，降低資料不一致風險

**Server/Client Components 協作**：
- 在 App Router 環境處理 Server/Client Components 協作
- 讓 UI 與資料層緊密貼合後端結構

**共用語言**：
- 前後端幾乎「共用語言」
- 提高溝通精準度與開發效率

---

## 性能優化與模組設計

系統資料量大、表單欄位多且含即時驗證，我對渲染與資料流做系統性優化：

### 組件分割與載入策略

- **Lazy Loading、Suspense、Parallel/Nested Routes**
- 大型表單做區塊化渲染與條件掛載
- 降低首屏負載

### 互動負載管控

- 高頻輸入採 **Debounce/Throttle**
- 非關鍵欄位延遲校驗
- 減少不必要 re-render

### 狀態切面劃分

- 分離 **UI State** 與 **Server State**
- 避免全域狀態放大導致重渲染

### 錯誤復原體驗

- 提交流程提供局部回復
- 精準錯誤提示
- 維持操作連續性

---

## API 資料呼叫與快取策略（GraphQL：Query / Mutation）

在 Apollo Client + GraphQL 架構下，以 Schema 為中心制定 Query/Mutation 策略，兼顧一致性與性能：

### 型別/欄位策略（Type/Field Policies）

- 為 Campaign、Order、Channel 等核心實體設定 `keyFields`，啟用正規化快取
- 列表欄位（如 campaigns、orders）自訂 `merge/read`，支援 cursor/offset 分頁與去重

### 快取政策（Fetch Policies）

- **預設**：`cache-first`（列表/詳情回訪快）
- **即時性頁面**：`cache-and-network`
- **強一致後台操作**：`network-only`

### 樂觀更新與快取更新（Optimistic UI / Cache Updates）

- Mutation 先樂觀回寫，再以回傳資料校正
- 在 `update(cache, result)` 精準更新受影響 Query
- 例如：將新建 Campaign 插入 campaigns 列表

### 快取失效與重整（Eviction / Refetch）

- 對審核/發佈等敏感狀態，Mutation 後選擇性驅逐或 `refetchQueries`
- 僅刷新必要 Query
- 以 Fragment（`writeFragment/readFragment`）局部更新，避免大範圍重抓

### 分頁與去重（Pagination & De-dup）

- 採 cursor-based 分頁，於 merge 實作去重
- 長列表支援無限滾動與漸進載入

### 批次/併發與重試（Batching, Concurrency, Retry）

- 啟用 HTTP Batching 或 Link 層請求合併，降低 RTT
- 啟用 dedup 避免短時間重複 Query
- 可恢復錯誤採指數退避重試，UI 提供重試入口

### 權限與可見性（Auth & Visibility）

- Apollo Link 注入 Token 與 tenant 上下文
- 確保資料隔離與快取命名空間正確

### 型別與代碼生成（Types/Codegen）

- 以 **GraphQL Codegen** 產出 TS 型別與 Hooks
- 前端直接對照 Schema 開發

### SSR/ISR 搭配

- 首屏以 SSR/ISR 提供穩定與 SEO
- 互動階段由 Apollo 快取接管
- 形成「**SSR 首畫面 + 客端快取增量**」的混合路徑

---

## Team Collaboration and Development Process

**Bi-weekly Sprints** with weekly code review and retrospectives.

### My Contributions

I was responsible for:
- Module documentation
- Shared logic organization
- Establishing cross-functional communication mechanisms

This enabled **SA, design, and backend** to quickly align on frontend implementation constraints and requirements.

### Frontend Positioning

In large projects, I positioned frontend as the **bridge between user experience and data logic**:
- Interfaces must not only be user-friendly
- But also accurately reflect **business and data rules**

---

## Year-End Review

2023 was a year I accumulated **enterprise-level practical experience** in:
- **Next.js App Router**
- **GraphQL Schema-Driven Development**
- **Performance optimization**
- **Modular design**

I learned to collaborate precisely in **multi-functional teams**, advancing frontend value with a perspective that balances **architecture and experience**.

**Future Direction**:
- Continue with **frontend engineering as the core**
- Combine **product logic and system thinking**
- Embrace projects of even **higher complexity**

---

_Advancing with enterprise-scale architecture expertise and refined collaboration skills._
